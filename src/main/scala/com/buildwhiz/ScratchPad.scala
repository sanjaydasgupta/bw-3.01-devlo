package com.buildwhiz

import com.buildwhiz.infra.{BWMongoDB3, DynDoc}
import com.buildwhiz.infra.BWMongoDB3._
import com.buildwhiz.infra.DynDoc._
import org.apache.http.entity.ContentType
import org.bson.Document
import org.bson.types.ObjectId
import java.util.Base64

import scala.jdk.CollectionConverters._
object ScratchPad extends App {
  val idt = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Im1CMk1BeUtTbjU1NWlzZDBFYmRoS3g2bmt5QWk5eExxOHJ2Q0ViX25PeVkifQ.eyJpc3MiOiJodHRwczpcL1wvc2xhY2suY29tIiwic3ViIjoiVTA0RFM5QUNIUjYiLCJhdWQiOiI2NDQ1MzcyOTYyNzcuNjYyMTAyODA4ODg2IiwiZXhwIjoxNjc1NzYwOTgwLCJpYXQiOjE2NzU3NjA2ODAsImF1dGhfdGltZSI6MTY3NTc2MDY4MCwibm9uY2UiOiJhYmNkIiwiYXRfaGFzaCI6IjQ5RkpfaXhteUR4UUtGVlZTZ252QlEiLCJodHRwczpcL1wvc2xhY2suY29tXC90ZWFtX2lkIjoiVEpZRlQ4UTg1IiwiaHR0cHM6XC9cL3NsYWNrLmNvbVwvdXNlcl9pZCI6IlUwNERTOUFDSFI2IiwiZW1haWwiOiJzYW5kaXAua2FwYXRAdmlhdml0YWUuY28uaW4iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZGF0ZV9lbWFpbF92ZXJpZmllZCI6MTY2OTgwMjk1NCwibG9jYWxlIjoiZW4tVVMiLCJuYW1lIjoiU2FuZGlwIEthcGF0IiwicGljdHVyZSI6Imh0dHBzOlwvXC9zZWN1cmUuZ3JhdmF0YXIuY29tXC9hdmF0YXJcLzc3NDUwMmMwMGEwOTA1YzEwZGI1Yzk2MWExODc4ZjY1LmpwZz9zPTUxMiZkPWh0dHBzJTNBJTJGJTJGYS5zbGFjay1lZGdlLmNvbSUyRmRmMTBkJTJGaW1nJTJGYXZhdGFycyUyRmF2YV8wMDEyLTUxMi5wbmciLCJnaXZlbl9uYW1lIjoiU2FuZGlwIiwiZmFtaWx5X25hbWUiOiJLYXBhdCIsImh0dHBzOlwvXC9zbGFjay5jb21cL3RlYW1fbmFtZSI6IkJ1aWxkV2hpeiIsImh0dHBzOlwvXC9zbGFjay5jb21cL3RlYW1fZG9tYWluIjoiYnVpbGR3aGl6IiwiaHR0cHM6XC9cL3NsYWNrLmNvbVwvdGVhbV9pbWFnZV8yMzAiOiJodHRwczpcL1wvYS5zbGFjay1lZGdlLmNvbVwvODA1ODhcL2ltZ1wvYXZhdGFycy10ZWFtc1wvYXZhXzAwMDYtMjMwLnBuZyIsImh0dHBzOlwvXC9zbGFjay5jb21cL3RlYW1faW1hZ2VfZGVmYXVsdCI6dHJ1ZX0.gWQTqOh9zE9IFR9ZQog4Ll5GhwUFQmU74XBGf58_j39cqK6EFWVhW39KT7r-RcTotKJDYdNu-zz8ulr7eRW4zv3CNseiUPxjYsy7KYgmSKqVvsiar78VITqPfn4jVwvxNCGQe5TGr1diCcslhBvSID9IXt38u85mHvgliI8ikmhpx3FHtgOqQQe1MgWLsep3-pJdE98G2_jxh9w6UONkbj72wpulpahIDzg9jjLsjQKPScJ5-a3SIdZh57Q_sAMSae_OOfE8U5RN4222H2JaRUjGOtvS-2esPdyKgobLr3SdXS9ODy0kW-Jdxt8riCh8icaSnJV20fmZzjmr4Zw8Jg"
  val parts = idt.split("[.]")
  println(parts.length)
  try {
    val str = new String(Base64.getUrlDecoder.decode(parts(1)))
    val doc = Document.parse(str)
    print(doc.toJson)
  } catch {
    case t: Throwable => t.printStackTrace()
  }
}
