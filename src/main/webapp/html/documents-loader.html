<div class="panel panel-primary">
  <div class="panel-heading">
    Documents Loader
  </div>

  <div class="panel-body fixed-panel container-fluid" style="padding:5px">
    <!-- Class Meta Data -->
    <div class="row center-block" style="padding:5px 5px; border:2px solid #337ab7; width:100%">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding:0px;">
        <table width="100%">
          <tr><th style="background-color:#337ab7; text-align:center; color:white;">Class Meta Data</th></tr>
        </table>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;<span style="font-weight:bold;">Category</span>&nbsp;
        <div class="btn-group" data-uib-dropdown data-dropdown-append-to="appendToEl">
          <button id="btn-type" type="button" class="btn btn-info btn-xs" data-uib-dropdown-toggle>
            {{loaderCtrl.currentCategoryKey}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" data-uib-dropdown-menu role="menu" aria-labelledby="btn-type"
              style="min-width:50px">
            <li class="dropdown-item" data-ng-repeat="category in loaderCtrl.documentCategories">
              <a href="javascript:void(0)" style="padding:3px;"
                 data-ng-click="loaderCtrl.fetchDocumentsByCategory(category)">{{category}}</a>
            </li>
            <!--li class="divider" style="margin:1px;"></li>
            <li class="dropdown-item"><a href="javascript:void(0)"
                data-ng-click="loaderCtrl.fetchDocumentsByCategory('Any')" style="padding:3px;">Any</a></li-->
          </ul>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;<span style="font-weight:bold;">Subcategory</span>&nbsp;
        <div class="btn-group" data-uib-dropdown data-dropdown-append-to="appendToEl">
          <button id="btn-subcategory" type="button" class="btn btn-info btn-xs" data-uib-dropdown-toggle>
            {{loaderCtrl.currentSubcategoryKey}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" data-uib-dropdown-menu role="menu" aria-labelledby="btn-subcategory"
              style="min-width:50px">
            <li class="dropdown-item" data-ng-repeat="subcategory in loaderCtrl.documentSubcategories"><a href="javascript:void(0)"
                data-ng-click="loaderCtrl.fetchDocumentsBySubcategory(subcategory)" style="padding:3px;">{{subcategory}}</a></li>
            <li class="divider" style="margin:1px;"></li>
            <li class="dropdown-item"><a href="javascript:void(0)"
                data-ng-click="loaderCtrl.fetchDocumentsBySubcategory('Other')" style="padding:3px;">Other</a></li>
          </ul>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;SubCategory&nbsp;
        <input type="text" data-ng-model="loaderCtrl.subcategoryText" style="height:20px; margin:1px;"
               data-ng-disabled="loaderCtrl.currentSubcategoryKey != 'Other'" size="10" />
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;Name&nbsp;
        <input type="text" data-ng-model="loaderCtrl.documentName" size="15" style="height:20px; margin:1px;" />
      </div>
      <div class="col-xs-12 col-sm-8 col-md-8 col-lg-4 col-xl-4" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;Descr&nbsp;
        <input type="text" data-ng-model="loaderCtrl.documentDescription" size="35" style="height:20px; margin:1px;" />
      </div>
    </div>
    <!-- Version Meta Data -->
    <div class="row center-block" style="padding:5px 5px; margin-top:3px; border:2px solid #337ab7; width:100%">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding:0px;">
        <table width="100%">
          <tr><th style="background-color:#337ab7; text-align:center; color:white;">Version Meta Data</th></tr>
        </table>
      </div>
      <div class="col-xs-12 col-sm-8 col-md-8 col-lg-4 col-xl-4" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;Comments&nbsp;
        <input type="text" data-ng-model="loaderCtrl.versionComments" size="35" style="margin:4px;"/>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="padding:3px; border:1px solid #337ab7; height:42px;">
        &nbsp;&nbsp;Author filter&nbsp;
        <input type="text" data-ng-model="loaderCtrl.authorsMask" size="5" style="height:20px" />
        <button class="btn btn-xs btn-info" data-ng-click="loaderCtrl.filterAuthorNames()">Filter</button>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="padding:3px; border:1px solid #337ab7; height:42px;">
        &nbsp;&nbsp;Author&nbsp;
        <div class="btn-group" data-uib-dropdown data-dropdown-append-to="appendToEl">
          <button id="btn-author2" type="button" class="btn btn-info btn-xs" data-uib-dropdown-toggle>
            {{loaderCtrl.currentAuthor.name}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" data-uib-dropdown-menu role="menu" aria-labelledby="btn-author2"
              style="min-width:50px">
            <li class="dropdown-item" data-ng-repeat="author in loaderCtrl.filteredAuthors">
              <a href="javascript:void(0)" style="padding:3px;"
                 data-ng-click="loaderCtrl.fetchDocumentsByAuthor(author)">{{author.name}}</a>
            </li>
            <li class="divider" style="margin:1px;"></li>
            <li class="dropdown-item"><a href="javascript:void(0)"
                data-ng-click="loaderCtrl.fetchDocumentsByAuthor({_id: '', name: 'Any'})" style="padding:3px;">Any</a></li>
          </ul>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="padding:3px; border:1px solid #337ab7; vertical-align:middle;">
        <span class="input-group" style="max-width:150px; vertical-align:middle;">
          <input type="text" class="form-control" data-uib-datepicker-popup data-ng-model="loaderCtrl.selectedDate"
                 data-is-open="loaderCtrl.datePickerOpened" data-datepicker-options="loaderCtrl.dateOptions"
                 data-ng-required="true" style="max-width:150px;" />
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" data-ng-click="loaderCtrl.datePickerOpened = true"><i class="glyphicon glyphicon-calendar"></i></button>
          </span>
        </span>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2 col-xl-2" style="padding:3px; border:1px solid #337ab7;">
        <span data-uib-timepicker data-ng-model="loaderCtrl.selectedDate" data-show-spinners="false"></span>
      </div>
    </div>
    <!-- Option Selection -->
    <div class="row center-block" style="padding:5px 5px; margin-top:3px; border:2px solid #337ab7; width:100% vertical-align:top;">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;<span style="font-weight:bold;">Operation</span>&nbsp;
        <div class="btn-group" data-uib-dropdown data-dropdown-append-to="appendToEl">
          <button id="option-type" type="button" class="btn btn-info btn-xs" data-uib-dropdown-toggle>
            {{loaderCtrl.currentOperationKey}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" data-uib-dropdown-menu role="menu" aria-labelledby="option-type" style="min-width:50px">
            <li class="dropdown-item"><a href="javascript:void(0)"
                data-ng-click="loaderCtrl.setOperation('Files Upload')" style="padding:3px;">Files Upload</a></li>
            <li class="dropdown-item"><a href="javascript:void(0)"
                data-ng-click="loaderCtrl.setOperation('Metadata Update')" style="padding:3px;">Metadata Update</a></li>
            <li class="dropdown-item"><a href="javascript:void(0)"
                data-ng-click="loaderCtrl.setOperation('RFI Destinations')" style="padding:3px;">RFI Destinations</a></li>
          </ul>
        </div>
        <span style="margin:0px" class="pull-right">
          &nbsp;&nbsp;<button class="btn btn-xs btn-info" data-ng-click="loaderCtrl.setMidnight()">Midnight</button>
        </span>
        <span data-ng-if="loaderCtrl.currentOperationKey == 'Files Upload'" style="margin:0px" class="pull-right">
          <button class="btn btn-xs btn-primary" data-ng-click="loaderCtrl.upload()"
                data-ng-disabled="loaderCtrl.uploadDisabled()">Upload</button>
          <input id="document-upload-button" type="file" style="display:none;" multiple />
        </span>
        <span data-ng-if="loaderCtrl.currentOperationKey == 'Metadata Update'" style="margin:0px" class="pull-right">
          <input type="checkbox" data-ng-model="loaderCtrl.useTextInSearch" /> Use text in search
          <button data-ng-disabled="loaderCtrl.findDisabled()" class="btn btn-xs btn-primary" data-ng-click="loaderCtrl.findDocuments()">
            <span class="glyphicon glyphicon-search"></span> Find</button>
          <button data-ng-disabled="loaderCtrl.updateDisabled()" class="btn btn-xs btn-warning" data-ng-click="loaderCtrl.update()">
            <span class="glyphicon glyphicon-edit"></span> Update</button>
        </span>
        <span data-ng-if="loaderCtrl.currentOperationKey == 'RFI Destinations'" style="margin:0px" class="pull-right">
          <button data-ng-disabled="loaderCtrl.findRfiDestinationDisabled()" class="btn btn-xs btn-primary" data-ng-click="loaderCtrl.findRfiDestination()">
            <span class="glyphicon glyphicon-search"></span> Refresh</button>
          <button data-ng-disabled="loaderCtrl.setRfiDestinationDisabled()" class="btn btn-xs btn-warning" data-ng-click="loaderCtrl.setRfiDestination()">
            <span class="glyphicon glyphicon-edit"></span> Update</button>
        </span>
      </div>
    </div>
    <!-- Found Documents Table (displayed conditionally) -->
    <div data-ng-if="loaderCtrl.currentOperationKey == 'Metadata Update'" class="row center-block" style="padding:5px 5px; margin-top:3px; border:2px solid #337ab7; width:100% vertical-align:top;">
      <table width="100%">
        <tr><th style="background-color:#337ab7; text-align:center; color:white;">Documents ({{loaderCtrl.documents.length}})</th></tr>
      </table>
      <div style="height:200px; max-height:200px; min-height:200px; overflow:auto;">
        <table border="1" width="100%">
          <tr><th style="text-align:center;">Name</th><th style="text-align:center;">Description</th><th style="text-align:center;">Version Comments</th>
            <th style="text-align:center;">Date & Time</th><th style="text-align:center;">Author</th>
            <th style="text-align:center;">Select</th>
          </tr>
          <tr data-ng-repeat="document in loaderCtrl.documents" style="background-color:{{loaderCtrl.documentColor(document)}};">
            <td style="text-align:center;">{{document.name}}</td><td style="text-align:center;">{{document.description}}</td><td style="text-align:center;">{{document.comments}}</td>
            <td style="text-align:center;">{{document.date_time}}</td><td style="text-align:center;">{{document.author}}</td>
            <td style="text-align:center;">
              <a href="javascript:void(0);" data-ng-click="loaderCtrl.selectDocument(document)">select</a>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>

