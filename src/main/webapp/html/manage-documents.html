<div class="panel panel-primary">
  <div class="panel-heading">
    Manage Documents
  </div>

  <div class="panel-body fixed-panel container-fluid" style="padding:5px">
    <div class="row center-block" style="padding:5px 5px; border:2px solid #337ab7; width:100%">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding:0px;">
        <table width="100%">
          <tr><th style="background-color:#337ab7; text-align:center; color:white;">Document Attributes</th></tr>
        </table>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;Category&nbsp;
        <div class="btn-group" data-uib-dropdown data-dropdown-append-to="appendToEl">
          <button id="btn-type" type="button" class="btn btn-info btn-xs" data-uib-dropdown-toggle>
            {{manageDocsCtrl.currentCategoryKey}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" data-uib-dropdown-menu role="menu" aria-labelledby="btn-type"
              style="min-width:50px">
            <li class="dropdown-item" data-ng-repeat="category in manageDocsCtrl.documentCategories">
              <a href="javascript:void(0)" style="padding:3px;"
                 data-ng-click="manageDocsCtrl.fetchDocumentsByCategory(category)">{{category}}</a>
            </li>
            <li class="divider" style="margin:1px;"></li>
            <li class="dropdown-item"><a href="javascript:void(0)"
                data-ng-click="manageDocsCtrl.fetchDocumentsByCategory('Any')" style="padding:3px;">Any</a></li>
          </ul>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;SubCtgry&nbsp;
        <input type="text" data-ng-model="manageDocsCtrl.documentSubcategory" size="10" style="height:20px; margin:1px;" />
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;Name&nbsp;
        <input type="text" data-ng-model="manageDocsCtrl.documentName" size="15" style="height:20px; margin:1px;" />
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;Descr&nbsp;
        <input type="text" data-ng-model="manageDocsCtrl.documentDescription" size="15" style="height:20px; margin:1px;" />
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;Content&nbsp;
        <div class="btn-group" data-uib-dropdown data-dropdown-append-to="appendToEl">
          <button id="btn-content" type="button" class="btn btn-info btn-xs" data-uib-dropdown-toggle>
            {{manageDocsCtrl.currentContentKey}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" data-uib-dropdown-menu role="menu" aria-labelledby="btn-content"
              style="min-width:50px">
            <li class="dropdown-item" data-ng-repeat="contentType in manageDocsCtrl.contentTypes"><a href="javascript:void(0)"
                                                                                                     data-ng-click="manageDocsCtrl.fetchDocumentsByContent(contentType)" style="padding:3px;">{{contentType}}</a></li>
            <li class="divider" style="margin:1px;"></li>
            <li class="dropdown-item"><a href="javascript:void(0)"
                                         data-ng-click="manageDocsCtrl.fetchDocumentsByContent('Any')" style="padding:3px;">Any</a></li>
          </ul>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7;">
        <button class="btn btn-xs btn-info" data-ng-click="manageDocsCtrl.findRecords()"><span class="glyphicon glyphicon-search"></span> Find</button>
        <!--button class="btn btn-xs btn-info" data-ng-click="manageDocsCtrl.resetFields()">Reset</button-->
        <!--button class="btn btn-xs btn-info" data-ng-click="manageDocsCtrl.copyFields()"
            data-ng-disabled="!manageDocsCtrl.recordSelected">Copy</button-->
        <button class="btn btn-xs btn-primary" data-ng-click="manageDocsCtrl.newRecord()"
            data-ng-disabled="manageDocsCtrl.newButtonDisabled()"
            data-ng-if="manageDocsCtrl.isDataAdmin()">New</button>
      </div>
    </div>
    <div data-ng-if="manageDocsCtrl.findModeActive" class="row center-block" style="padding:5px 5px; margin-top:3px; border:2px solid #337ab7; width:100% vertical-align:top;">
      <table width="100%">
        <tr><th style="background-color:#337ab7; text-align:center; color:white;">Found {{manageDocsCtrl.records.length}} File(s)</th></tr>
      </table>
      <div style="height:100px; max-height:100px; min-height:100px; overflow:auto;">
        <table border="1" width="100%">
          <tr><th style="text-align:center;">Category</th><th style="text-align:center;">Subcategory</th>
            <th style="text-align:center;">Name</th><th style="text-align:center;">Description</th>
            <th data-ng-if="!manageDocsCtrl.isDataAdmin()" style="text-align:center;">Download</th>
            <th data-ng-if="manageDocsCtrl.isDataAdmin()" style="text-align:center;">Versions</th>
            <th data-ng-if="manageDocsCtrl.isDataAdmin()" style="text-align:center;">Select</th></tr>
          <tr data-ng-repeat="record in manageDocsCtrl.records" style="background-color:{{manageDocsCtrl.getColor(record)}};">
            <td style="text-align:center;">{{record.category}}</td><td style="text-align:center;">{{record.subcategory}}</td>
            <td style="text-align:center;">{{record.name}}</td><td style="text-align:center;">{{record.description}}</td>
            <td data-ng-if="!manageDocsCtrl.isDataAdmin()" style="text-align:center;"><a href="{{record.link}}" target="_blank">download</a></td>
            <td data-ng-if="manageDocsCtrl.isDataAdmin()" style="text-align:center;">{{record.versions.length}}</td>
            <td data-ng-if="manageDocsCtrl.isDataAdmin()" style="text-align:center;">
              <a href="javascript:void(0);" data-ng-click="manageDocsCtrl.selectRecord(record)">select</a>
            </td>
          </tr>
        </table>
      </div>
    </div>
    <div data-ng-if="manageDocsCtrl.recordSelected" class="row center-block"
         style="padding:5px 5px; margin-top:3px; border:2px solid #337ab7; width:100% vertical-align:top;">
      <table width="100%">
        <tr><th style="background-color:#337ab7; text-align:center; color:white;">Selected Versions</th></tr>
      </table>
      <div style="height:75px; max-height:75px; min-height:75px; overflow:auto;">
        <table border="1" width="100%">
          <tr><th style="text-align:center;">File-Name</th><th style="text-align:center;">Comments</th><th style="text-align:center;">Timestamp</th>
            <th style="text-align:center;">Author</th><th style="text-align:center;">Download</th></tr>
          <tr data-ng-repeat="version in manageDocsCtrl.versions">
            <td style="text-align:center;">{{version.file_name}}</td><td style="text-align:center;">{{version.comments}}</td>
            <td style="text-align:center;">{{version.date_time}}</td><td style="text-align:center;">{{version.author_name}}</td>
            <td style="text-align:center;"><a href="{{version.link}}" target="_blank">download</a></td>
          </tr>
        </table>
      </div>
    </div>
    <div data-ng-if="manageDocsCtrl.recordSelected || manageDocsCtrl.newModeActive" class="row center-block" style="padding:5px 5px; margin-top:3px; border:2px solid #337ab7; width:100%">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding:0px;">
        <table width="100%">
          <tr><th style="background-color:#337ab7; text-align:center; color:white;">Upload</th></tr>
        </table>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7;">
        &nbsp;&nbsp;Comment&nbsp;
        <input type="text" data-ng-model="manageDocsCtrl.versionComments" size="10" style="margin:4px;"/>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7; vertical-align:middle;">
        <span class="input-group" style="max-width:150px; vertical-align:middle;">
          <input type="text" class="form-control" data-uib-datepicker-popup data-ng-model="manageDocsCtrl.selectedDate"
             data-is-open="manageDocsCtrl.datePickerOpened" data-datepicker-options="manageDocsCtrl.dateOptions"
              data-ng-required="true" style="max-width:150px;" />
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" data-ng-click="manageDocsCtrl.datePickerOpened = true"><i class="glyphicon glyphicon-calendar"></i></button>
          </span>
        </span>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7;">
        <span data-uib-timepicker data-ng-model="manageDocsCtrl.selectedDate" data-show-spinners="false"></span>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7; height:42px;">
        &nbsp;&nbsp;Author filter&nbsp;
        <input type="text" data-ng-model="manageDocsCtrl.authorsMask" size="5" style="height:20px" />
        <button class="btn btn-xs btn-info" data-ng-click="manageDocsCtrl.filterAuthorNames()">Filter</button>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7; height:42px;">
        &nbsp;&nbsp;Author&nbsp;
        <div class="btn-group" data-uib-dropdown data-dropdown-append-to="appendToEl">
          <button id="btn-author2" type="button" class="btn btn-info btn-xs" data-uib-dropdown-toggle>
            {{manageDocsCtrl.currentAuthor.name}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" data-uib-dropdown-menu role="menu" aria-labelledby="btn-author2"
              style="min-width:50px">
            <li class="dropdown-item" data-ng-repeat="author in manageDocsCtrl.filteredAuthors">
              <a href="javascript:void(0)" style="padding:3px;"
                 data-ng-click="manageDocsCtrl.fetchDocumentsByAuthor(author)">{{author.name}}</a>
            </li>
            <li class="divider" style="margin:1px;"></li>
            <li class="dropdown-item"><a href="javascript:void(0)"
                data-ng-click="manageDocsCtrl.fetchDocumentsByAuthor({_id: '', name: 'Any'})" style="padding:3px;">Any</a></li>
          </ul>
        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="padding:3px; border:1px solid #337ab7; height:42px;">
        <button class="btn btn-xs btn-info" data-ng-click="manageDocsCtrl.setMidnight()">Midnight</button>
        <button class="btn btn-xs btn-primary" data-ng-click="manageDocsCtrl.upload()"
            data-ng-disabled="manageDocsCtrl.uploadDisabled()">Upload</button>
        <input id="document-upload-button" type="file" style="display:none;" multiple />
      </div>
    </div>
  </div>
</div>

